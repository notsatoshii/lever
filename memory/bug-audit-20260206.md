# Frontend Bug Audit - 2026-02-06

## Critical Bugs ðŸ”´

### 1. Navigation: Connect Button Says "Deposit"
**File:** `components/Navigation.tsx`
**Issue:** When not connected, button text says "Deposit" instead of "Connect Wallet"
**Fix:** Change button text

### 2. Navigation: Shows "0 USDT" Hardcoded
**File:** `components/Navigation.tsx`
**Issue:** Connected state shows hardcoded "0 USDT" instead of actual balance
**Fix:** Fetch actual USDT balance from contract

### 3. Portfolio: Random PnL Values
**File:** `app/portfolio/page.tsx`
**Issue:** Lines 74, 155 use `Math.random()` for PnL - shows different values each render
**Fix:** Calculate actual PnL from position data or show "â€”" if unavailable

### 4. Portfolio: Hardcoded Market Names
**File:** `app/portfolio/page.tsx`
**Issue:** MARKETS object has hardcoded names that don't match Polymarket
**Fix:** Remove hardcoded list, fetch market info dynamically

### 5. Portfolio: "Earned Fees" Hardcoded
**File:** `app/portfolio/page.tsx`
**Issue:** Shows "+$0.00" hardcoded instead of reading from LP contract
**Fix:** Fetch pendingFeesOf from LP_POOL contract

### 6. PriceChart: Shows Simulated Data
**File:** `components/PriceChart.tsx`
**Issue:** Chart generates random historical data instead of using Polymarket price
**Fix:** Use polymarketPrice prop, generate more realistic simulated history based on it

### 7. TradingPanel: Hardcoded Liquidation Price
**File:** `components/TradingPanel.tsx`
**Issue:** Shows "~35Â¢" / "~65Â¢" hardcoded instead of calculating
**Fix:** Calculate based on collateral, leverage, and current price

## Medium Bugs ðŸŸ¡

### 8. LP Page: Est. APY Too Simplistic
**File:** `app/lp/page.tsx`
**Issue:** `estimatedAPY = utilizationPercent * 0.15` is arbitrary
**Fix:** Better formula or show "Coming soon" for APY

### 9. Polymarket Link URL Format
**File:** `app/markets/[id]/page.tsx`
**Issue:** Link goes to `/event/slug` but Polymarket URLs vary
**Fix:** Verify correct URL format for Polymarket

### 10. Market ID Mapping
**Issue:** Home page assigns sequential IDs (1, 2, 3...) to Polymarket markets
**Fix:** This is intentional for our contract mapping - document it

## Status Tracking

- [x] Bug 1: Navigation button text âœ… FIXED
- [x] Bug 2: Navigation USDT balance âœ… FIXED
- [x] Bug 3: Portfolio random PnL âœ… FIXED - now calculates from actual position data
- [x] Bug 4: Portfolio hardcoded markets âœ… FIXED - removed, shows Market #ID
- [x] Bug 5: Portfolio earned fees âœ… FIXED - fetches pendingFeesOf from contract
- [x] Bug 6: PriceChart simulated data âœ… FIXED - uses polymarketPrice as base
- [x] Bug 7: TradingPanel liq price âœ… FIXED - calculates based on leverage
- [ ] Bug 8: LP APY formula - kept simple for now (utilization * 0.15)
- [x] Bug 9: Polymarket URL âœ… FIXED - changed to /market/ path

## Completed: 2026-02-06 12:45 UTC

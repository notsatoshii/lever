{"abi":[{"type":"constructor","inputs":[{"name":"_collateralToken","type":"address","internalType":"address"}],"stateMutability":"nonpayable"},{"type":"function","name":"authorizedEngines","inputs":[{"name":"","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"collateralToken","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"createMarket","inputs":[{"name":"oracle","type":"address","internalType":"address"},{"name":"maxOI","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"marketId","type":"uint256","internalType":"uint256"}],"stateMutability":"nonpayable"},{"type":"function","name":"getMarket","inputs":[{"name":"marketId","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"tuple","internalType":"struct PositionLedger.Market","components":[{"name":"oracle","type":"address","internalType":"address"},{"name":"totalLongOI","type":"uint256","internalType":"uint256"},{"name":"totalShortOI","type":"uint256","internalType":"uint256"},{"name":"maxOI","type":"uint256","internalType":"uint256"},{"name":"fundingIndex","type":"uint256","internalType":"uint256"},{"name":"borrowIndex","type":"uint256","internalType":"uint256"},{"name":"active","type":"bool","internalType":"bool"}]}],"stateMutability":"view"},{"type":"function","name":"getOIImbalance","inputs":[{"name":"marketId","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"int256","internalType":"int256"}],"stateMutability":"view"},{"type":"function","name":"getPosition","inputs":[{"name":"trader","type":"address","internalType":"address"},{"name":"marketId","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"tuple","internalType":"struct PositionLedger.Position","components":[{"name":"marketId","type":"uint256","internalType":"uint256"},{"name":"size","type":"int256","internalType":"int256"},{"name":"entryPrice","type":"uint256","internalType":"uint256"},{"name":"collateral","type":"uint256","internalType":"uint256"},{"name":"openTimestamp","type":"uint256","internalType":"uint256"},{"name":"lastFundingIndex","type":"uint256","internalType":"uint256"},{"name":"lastBorrowIndex","type":"uint256","internalType":"uint256"}]}],"stateMutability":"view"},{"type":"function","name":"getUnrealizedPnL","inputs":[{"name":"trader","type":"address","internalType":"address"},{"name":"marketId","type":"uint256","internalType":"uint256"},{"name":"currentPrice","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"pnl","type":"int256","internalType":"int256"}],"stateMutability":"view"},{"type":"function","name":"liquidatePosition","inputs":[{"name":"trader","type":"address","internalType":"address"},{"name":"marketId","type":"uint256","internalType":"uint256"},{"name":"liquidator","type":"address","internalType":"address"},{"name":"penalty","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"markets","inputs":[{"name":"","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"oracle","type":"address","internalType":"address"},{"name":"totalLongOI","type":"uint256","internalType":"uint256"},{"name":"totalShortOI","type":"uint256","internalType":"uint256"},{"name":"maxOI","type":"uint256","internalType":"uint256"},{"name":"fundingIndex","type":"uint256","internalType":"uint256"},{"name":"borrowIndex","type":"uint256","internalType":"uint256"},{"name":"active","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"modifyCollateral","inputs":[{"name":"trader","type":"address","internalType":"address"},{"name":"marketId","type":"uint256","internalType":"uint256"},{"name":"collateralDelta","type":"int256","internalType":"int256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"nextMarketId","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"openPosition","inputs":[{"name":"trader","type":"address","internalType":"address"},{"name":"marketId","type":"uint256","internalType":"uint256"},{"name":"sizeDelta","type":"int256","internalType":"int256"},{"name":"price","type":"uint256","internalType":"uint256"},{"name":"collateralDelta","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"owner","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"positions","inputs":[{"name":"","type":"address","internalType":"address"},{"name":"","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"marketId","type":"uint256","internalType":"uint256"},{"name":"size","type":"int256","internalType":"int256"},{"name":"entryPrice","type":"uint256","internalType":"uint256"},{"name":"collateral","type":"uint256","internalType":"uint256"},{"name":"openTimestamp","type":"uint256","internalType":"uint256"},{"name":"lastFundingIndex","type":"uint256","internalType":"uint256"},{"name":"lastBorrowIndex","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"setEngineAuthorization","inputs":[{"name":"engine","type":"address","internalType":"address"},{"name":"authorized","type":"bool","internalType":"bool"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"setMarketActive","inputs":[{"name":"marketId","type":"uint256","internalType":"uint256"},{"name":"active","type":"bool","internalType":"bool"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"transferOwnership","inputs":[{"name":"newOwner","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"updateIndices","inputs":[{"name":"marketId","type":"uint256","internalType":"uint256"},{"name":"newFundingIndex","type":"uint256","internalType":"uint256"},{"name":"newBorrowIndex","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"event","name":"EngineAuthorized","inputs":[{"name":"engine","type":"address","indexed":true,"internalType":"address"},{"name":"authorized","type":"bool","indexed":false,"internalType":"bool"}],"anonymous":false},{"type":"event","name":"MarketCreated","inputs":[{"name":"marketId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"oracle","type":"address","indexed":false,"internalType":"address"},{"name":"maxOI","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"OwnershipTransferred","inputs":[{"name":"previousOwner","type":"address","indexed":true,"internalType":"address"},{"name":"newOwner","type":"address","indexed":true,"internalType":"address"}],"anonymous":false},{"type":"event","name":"PositionClosed","inputs":[{"name":"trader","type":"address","indexed":true,"internalType":"address"},{"name":"marketId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"realizedPnL","type":"int256","indexed":false,"internalType":"int256"}],"anonymous":false},{"type":"event","name":"PositionLiquidated","inputs":[{"name":"trader","type":"address","indexed":true,"internalType":"address"},{"name":"marketId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"liquidator","type":"address","indexed":false,"internalType":"address"},{"name":"penalty","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"PositionModified","inputs":[{"name":"trader","type":"address","indexed":true,"internalType":"address"},{"name":"marketId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"sizeDelta","type":"int256","indexed":false,"internalType":"int256"},{"name":"newCollateral","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"PositionOpened","inputs":[{"name":"trader","type":"address","indexed":true,"internalType":"address"},{"name":"marketId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"size","type":"int256","indexed":false,"internalType":"int256"},{"name":"entryPrice","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"collateral","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"error","name":"ExceedsMaxOI","inputs":[]},{"type":"error","name":"InsufficientCollateral","inputs":[]},{"type":"error","name":"InvalidPrice","inputs":[]},{"type":"error","name":"InvalidSize","inputs":[]},{"type":"error","name":"MarketNotActive","inputs":[]},{"type":"error","name":"MarketNotFound","inputs":[]},{"type":"error","name":"PositionNotFound","inputs":[]},{"type":"error","name":"ReentrantCall","inputs":[]},{"type":"error","name":"Unauthorized","inputs":[]}],"bytecode":{"object":"0x60a03461008057601f61115f38819003918201601f19168301916001600160401b038311848410176100845780849260209460405283398101031261008057516001600160a01b0381168103610080575f80546001600160a01b0319163317905560805260016005556040516110c690816100998239608051816109700152f35b5f80fd5b634e487b7160e01b5f52604160045260245ffdfe60806040526004361015610011575f80fd5b5f3560e01c80632986a75014610e31578063319dc99614610da957806334b62dd914610c665780633510954d14610c2a5780633adbb5af14610b63578063406ef2ef14610b465780635c95fdf914610ae25780638da5cb5b14610abb578063aea6155614610a54578063b1283e77146109dc578063b1bf884a1461099f578063b2016bd41461095b578063c1be6677146108d6578063d49cb43a14610798578063d52019e3146103b4578063e38ce69814610216578063eb44fdd3146101595763f2fde38b146100df575f80fd5b34610155576020366003190112610155576100f8610e5c565b5f546001600160a01b038082169233849003610144571680927f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e05f80a36001600160a01b031916175f55005b6040516282b42960e81b8152600490fd5b5f80fd5b3461015557602036600319011261015557610172610f0d565b506004355f52600160205260e060405f2061018b610e81565b60018060a01b0382541691828252600181015460208301908152600282015460408401908152600383015490606085019182526004840154926080860193845260c060ff600660058801549760a08a01988952015416960195151586526040519687525160208701525160408601525160608501525160808401525160a083015251151560c0820152f35b346101555760803660031901126101555761022f610e5c565b602435906044356001600160a01b03808216820361015557335f526020926003845260ff60405f2054161561014457845f52600184528160405f205416156103a2576002600554146103905760026005551690815f526002835260405f20845f528352600160405f2001908154801561037e5761031f84927f925d308fbed607657f53f02c6ec1cfe8df196226786b72cbd8522e6f7f305ac2928895865f526001895260405f20915f81135f14610367575060016102f06102fa925461107a565b9201918254610f00565b90555b604080516001600160a01b039092168252606435602083015290918291820190565b0390a35f526002815260405f20915f525261036060405f2060065f918281558260018201558260028201558260038201558260048201558260058201550155565b6001600555005b61037791506102f060029161107a565b90556102fd565b604051636ec9be1160e01b8152600490fd5b6040516306fda65d60e31b8152600490fd5b6040516307db1be560e41b8152600490fd5b346101555760a0366003190112610155576103cd610e5c565b335f52600360205260ff60405f20541615610144576024355f52600160205260ff600660405f2001541615610786576002600554146103905760026005556044351561077457606435158015610761575b6107505760018060a01b0381165f52600260205260405f206024355f5260205260405f20600160205260405f209061048160018201545f81135f14610729576104668161107a565b61047560018601918254610f00565b90555b60443590610eb5565b5f8113156106f3576104a19061049b60018501549161107a565b90610ee3565b600383015481116106e15760018301555b6001810154806105505750602435815560443560018201556064356002820155600660056084359384600385015542600485015560048101548285015501549101557f622f783b5650c1575c03bba3fea360286832ff8b7c6ba2627d521e1fcac97f81604051806105466024359560018060a01b031694606435604435846040919493926060820195825260208201520152565b0390a36001600555005b9161055d60443584610eb5565b928361057d5750505050610578906064359060243590610fce565b610360565b5f8085139113145f146106465750610598600182015461107a565b916105c26105ac6002840194855490610ed0565b61049b6064356105bd60443561107a565b610ed0565b926105cc8261107a565b8015610632576003940490556001820155016105eb6084358254610ee3565b80915560405190604435825260208201527f4bcddabd1de2161e430daec1df207cdffd877d3dcda65bd9280f3654a7b6bb6c60406024359360018060a01b031692a3610360565b634e487b7160e01b5f52601260045260245ffd5b6106d9907f622f783b5650c1575c03bba3fea360286832ff8b7c6ba2627d521e1fcac97f819261067b60643560243588610fce565b8460018201556064356002820155600660056084359384600385015542600485015560048101548285015501549101556040519182916024359660018060a01b03169560643590846040919493926060820195825260208201520152565b0390a3610360565b604051638a9d1c4160e01b8152600490fd5b5f8112610701575b506104b2565b6107139061049b60028501549161107a565b600383015481116106e1576002830155836106fb565b5f8112156104785761073a8161107a565b61074960028601918254610f00565b9055610478565b60405162bfc92160e01b8152600490fd5b50670de0b6b3a76400006064351161041e565b604051630ffd11ad60e01b8152600490fd5b604051635a90bb8d60e11b8152600490fd5b34610155576060366003190112610155576107b1610e5c565b6024359060443590335f52600360205260ff60405f20541615610144575f838152600160205260409020546001600160a01b0391908216156103a2576002600554146103905760026005551690815f52600260205260405f20835f5260205260405f209060018201541561037e575f8113156108745760038260409261085c837f4bcddabd1de2161e430daec1df207cdffd877d3dcda65bd9280f3654a7b6bb6c9601918254610ee3565b90555b01548151905f82526020820152a36001600555005b61087d90610ef0565b9060038101918254918282116108c4577f4bcddabd1de2161e430daec1df207cdffd877d3dcda65bd9280f3654a7b6bb6c936108bd600393604095610f00565b905561085f565b604051633a23d82560e01b8152600490fd5b34610155576040366003190112610155576001600160a01b036108f7610e5c565b165f52600260205260405f206024355f5260205260e060405f20805490600181015490600281015460038201546004830154916006600585015494015494604051968752602087015260408601526060850152608084015260a083015260c0820152f35b34610155575f366003190112610155576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b34610155576020366003190112610155576001600160a01b036109c0610e5c565b165f526003602052602060ff60405f2054166040519015158152f35b34610155576020366003190112610155576004355f52600160205260e060405f2060018060a01b03815416906001810154906002810154600382015460048301549160ff600660058601549501541694604051968752602087015260408601526060850152608084015260a0830152151560c0820152f35b3461015557604036600319011261015557600435610a70610e72565b5f546001600160a01b03908116330361014457825f52600160205260405f205416156103a257610ab9915f526001602052600660405f20019060ff801983541691151516179055565b005b34610155575f366003190112610155575f546040516001600160a01b039091168152602090f35b3461015557606036600319011261015557600435335f52600360205260ff60405f20541615610144575f818152600160205260409020546001600160a01b0316156103a2575f52600160205260405f20602435600482015560056044359101555f80f35b34610155575f366003190112610155576020600454604051908152f35b3461015557604036600319011261015557610b7c610e5c565b610b84610f0d565b5060018060a01b03165f52600260205260405f206024355f5260205260e060405f20610bae610e81565b815491828252600181015460208301908152600282015460408401908152600383015490606085019182526004840154926080860193845260c0600660058701549660a08901978852015496019586526040519687525160208701525160408601525160608501525160808401525160a08301525160c0820152f35b34610155576020366003190112610155576004355f5260016020526020610c5e60405f206002600182015491015490610f3f565b604051908152f35b3461015557604036600319011261015557610c7f610e5c565b5f54602435916001600160a01b03918216330361014457600454915f198314610d95576020938392610d727f557e20be357a3ff3fc08cf2b8e6986333057886a281d0409a7e751c3fd700ec093600186016004556006610cdd610e81565b9180851683528983015f8152604084015f8152606085018881526080860191670de0b6b3a76400009384845260a0880194855260c0880195600187528d5f528f6001905260405f209851166bffffffffffffffffffffffff60a01b89541617885551600188015551600287015551600386015551600485015551600584015551151591019060ff801983541691151516179055565b604080516001600160a01b039290921682526020820192909252a2604051908152f35b634e487b7160e01b5f52601160045260245ffd5b3461015557604036600319011261015557610dc2610e5c565b610dca610e72565b5f5490916001600160a01b039182163303610144577f83bf8afac9234ed83a207493167e1591d6a431888f797c46d0c902e27b8dcd2a916020911692835f5260038252610e268160405f209060ff801983541691151516179055565b6040519015158152a2005b34610155576060366003190112610155576020610c5e610e4f610e5c565b6044359060243590610f79565b600435906001600160a01b038216820361015557565b60243590811515820361015557565b6040519060e0820182811067ffffffffffffffff821117610ea157604052565b634e487b7160e01b5f52604160045260245ffd5b9190915f8382019384129112908015821691151617610d9557565b81810292918115918404141715610d9557565b91908201809211610d9557565b600160ff1b8114610d95575f0390565b91908203918211610d9557565b610f15610e81565b905f8083528060208401528060408401528060608401528060808401528060a084015260c0830152565b81810392915f138015828513169184121617610d9557565b81810292915f8212600160ff1b821416610d95578184051490151715610d9557565b60018060a01b03165f52600260205260405f20905f5260205260405f209060018201548015610fc757610fbd610fc3926002670de0b6b3a764000095015490610f3f565b90610f57565b0590565b5050505f90565b916040916110789360018060a01b031681817f03889ec414d60aad079a991887429a3a7acef381d59eef9ee26ec5cec26279ee6020670de0b6b3a76400006110375f98858a52600284528a8a20878b528452610fbd8b8b20916002600184015493015490610f3f565b058851908152a3825260026020528282209082526020522060065f918281558260018201558260028201558260038201558260048201558260058201550155565b565b5f81126110845790565b61108d90610ef0565b9056fea264697066735822122051110258ba1c5291d6f8ad06bec45a985d1f7a076b40b9f08bdf3ea985f1bf9164736f6c63430008140033","sourceMap":"519:12142:34:-:0;;;;;;;;;;;;;-1:-1:-1;;519:12142:34;;;;-1:-1:-1;;;;;519:12142:34;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;519:12142:34;;;;;;-1:-1:-1;519:12142:34;;-1:-1:-1;;;;;;519:12142:34;4156:10;519:12142;;;4176:34;;519:12142;4220:21;2199:1;519:12142;;;;;;;;4176:34;519:12142;;;;;;;-1:-1:-1;519:12142:34;;;;;;-1:-1:-1;519:12142:34;;;;;-1:-1:-1;519:12142:34","linkReferences":{}},"deployedBytecode":{"object":"0x60806040526004361015610011575f80fd5b5f3560e01c80632986a75014610e31578063319dc99614610da957806334b62dd914610c665780633510954d14610c2a5780633adbb5af14610b63578063406ef2ef14610b465780635c95fdf914610ae25780638da5cb5b14610abb578063aea6155614610a54578063b1283e77146109dc578063b1bf884a1461099f578063b2016bd41461095b578063c1be6677146108d6578063d49cb43a14610798578063d52019e3146103b4578063e38ce69814610216578063eb44fdd3146101595763f2fde38b146100df575f80fd5b34610155576020366003190112610155576100f8610e5c565b5f546001600160a01b038082169233849003610144571680927f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e05f80a36001600160a01b031916175f55005b6040516282b42960e81b8152600490fd5b5f80fd5b3461015557602036600319011261015557610172610f0d565b506004355f52600160205260e060405f2061018b610e81565b60018060a01b0382541691828252600181015460208301908152600282015460408401908152600383015490606085019182526004840154926080860193845260c060ff600660058801549760a08a01988952015416960195151586526040519687525160208701525160408601525160608501525160808401525160a083015251151560c0820152f35b346101555760803660031901126101555761022f610e5c565b602435906044356001600160a01b03808216820361015557335f526020926003845260ff60405f2054161561014457845f52600184528160405f205416156103a2576002600554146103905760026005551690815f526002835260405f20845f528352600160405f2001908154801561037e5761031f84927f925d308fbed607657f53f02c6ec1cfe8df196226786b72cbd8522e6f7f305ac2928895865f526001895260405f20915f81135f14610367575060016102f06102fa925461107a565b9201918254610f00565b90555b604080516001600160a01b039092168252606435602083015290918291820190565b0390a35f526002815260405f20915f525261036060405f2060065f918281558260018201558260028201558260038201558260048201558260058201550155565b6001600555005b61037791506102f060029161107a565b90556102fd565b604051636ec9be1160e01b8152600490fd5b6040516306fda65d60e31b8152600490fd5b6040516307db1be560e41b8152600490fd5b346101555760a0366003190112610155576103cd610e5c565b335f52600360205260ff60405f20541615610144576024355f52600160205260ff600660405f2001541615610786576002600554146103905760026005556044351561077457606435158015610761575b6107505760018060a01b0381165f52600260205260405f206024355f5260205260405f20600160205260405f209061048160018201545f81135f14610729576104668161107a565b61047560018601918254610f00565b90555b60443590610eb5565b5f8113156106f3576104a19061049b60018501549161107a565b90610ee3565b600383015481116106e15760018301555b6001810154806105505750602435815560443560018201556064356002820155600660056084359384600385015542600485015560048101548285015501549101557f622f783b5650c1575c03bba3fea360286832ff8b7c6ba2627d521e1fcac97f81604051806105466024359560018060a01b031694606435604435846040919493926060820195825260208201520152565b0390a36001600555005b9161055d60443584610eb5565b928361057d5750505050610578906064359060243590610fce565b610360565b5f8085139113145f146106465750610598600182015461107a565b916105c26105ac6002840194855490610ed0565b61049b6064356105bd60443561107a565b610ed0565b926105cc8261107a565b8015610632576003940490556001820155016105eb6084358254610ee3565b80915560405190604435825260208201527f4bcddabd1de2161e430daec1df207cdffd877d3dcda65bd9280f3654a7b6bb6c60406024359360018060a01b031692a3610360565b634e487b7160e01b5f52601260045260245ffd5b6106d9907f622f783b5650c1575c03bba3fea360286832ff8b7c6ba2627d521e1fcac97f819261067b60643560243588610fce565b8460018201556064356002820155600660056084359384600385015542600485015560048101548285015501549101556040519182916024359660018060a01b03169560643590846040919493926060820195825260208201520152565b0390a3610360565b604051638a9d1c4160e01b8152600490fd5b5f8112610701575b506104b2565b6107139061049b60028501549161107a565b600383015481116106e1576002830155836106fb565b5f8112156104785761073a8161107a565b61074960028601918254610f00565b9055610478565b60405162bfc92160e01b8152600490fd5b50670de0b6b3a76400006064351161041e565b604051630ffd11ad60e01b8152600490fd5b604051635a90bb8d60e11b8152600490fd5b34610155576060366003190112610155576107b1610e5c565b6024359060443590335f52600360205260ff60405f20541615610144575f838152600160205260409020546001600160a01b0391908216156103a2576002600554146103905760026005551690815f52600260205260405f20835f5260205260405f209060018201541561037e575f8113156108745760038260409261085c837f4bcddabd1de2161e430daec1df207cdffd877d3dcda65bd9280f3654a7b6bb6c9601918254610ee3565b90555b01548151905f82526020820152a36001600555005b61087d90610ef0565b9060038101918254918282116108c4577f4bcddabd1de2161e430daec1df207cdffd877d3dcda65bd9280f3654a7b6bb6c936108bd600393604095610f00565b905561085f565b604051633a23d82560e01b8152600490fd5b34610155576040366003190112610155576001600160a01b036108f7610e5c565b165f52600260205260405f206024355f5260205260e060405f20805490600181015490600281015460038201546004830154916006600585015494015494604051968752602087015260408601526060850152608084015260a083015260c0820152f35b34610155575f366003190112610155576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b34610155576020366003190112610155576001600160a01b036109c0610e5c565b165f526003602052602060ff60405f2054166040519015158152f35b34610155576020366003190112610155576004355f52600160205260e060405f2060018060a01b03815416906001810154906002810154600382015460048301549160ff600660058601549501541694604051968752602087015260408601526060850152608084015260a0830152151560c0820152f35b3461015557604036600319011261015557600435610a70610e72565b5f546001600160a01b03908116330361014457825f52600160205260405f205416156103a257610ab9915f526001602052600660405f20019060ff801983541691151516179055565b005b34610155575f366003190112610155575f546040516001600160a01b039091168152602090f35b3461015557606036600319011261015557600435335f52600360205260ff60405f20541615610144575f818152600160205260409020546001600160a01b0316156103a2575f52600160205260405f20602435600482015560056044359101555f80f35b34610155575f366003190112610155576020600454604051908152f35b3461015557604036600319011261015557610b7c610e5c565b610b84610f0d565b5060018060a01b03165f52600260205260405f206024355f5260205260e060405f20610bae610e81565b815491828252600181015460208301908152600282015460408401908152600383015490606085019182526004840154926080860193845260c0600660058701549660a08901978852015496019586526040519687525160208701525160408601525160608501525160808401525160a08301525160c0820152f35b34610155576020366003190112610155576004355f5260016020526020610c5e60405f206002600182015491015490610f3f565b604051908152f35b3461015557604036600319011261015557610c7f610e5c565b5f54602435916001600160a01b03918216330361014457600454915f198314610d95576020938392610d727f557e20be357a3ff3fc08cf2b8e6986333057886a281d0409a7e751c3fd700ec093600186016004556006610cdd610e81565b9180851683528983015f8152604084015f8152606085018881526080860191670de0b6b3a76400009384845260a0880194855260c0880195600187528d5f528f6001905260405f209851166bffffffffffffffffffffffff60a01b89541617885551600188015551600287015551600386015551600485015551600584015551151591019060ff801983541691151516179055565b604080516001600160a01b039290921682526020820192909252a2604051908152f35b634e487b7160e01b5f52601160045260245ffd5b3461015557604036600319011261015557610dc2610e5c565b610dca610e72565b5f5490916001600160a01b039182163303610144577f83bf8afac9234ed83a207493167e1591d6a431888f797c46d0c902e27b8dcd2a916020911692835f5260038252610e268160405f209060ff801983541691151516179055565b6040519015158152a2005b34610155576060366003190112610155576020610c5e610e4f610e5c565b6044359060243590610f79565b600435906001600160a01b038216820361015557565b60243590811515820361015557565b6040519060e0820182811067ffffffffffffffff821117610ea157604052565b634e487b7160e01b5f52604160045260245ffd5b9190915f8382019384129112908015821691151617610d9557565b81810292918115918404141715610d9557565b91908201809211610d9557565b600160ff1b8114610d95575f0390565b91908203918211610d9557565b610f15610e81565b905f8083528060208401528060408401528060608401528060808401528060a084015260c0830152565b81810392915f138015828513169184121617610d9557565b81810292915f8212600160ff1b821416610d95578184051490151715610d9557565b60018060a01b03165f52600260205260405f20905f5260205260405f209060018201548015610fc757610fbd610fc3926002670de0b6b3a764000095015490610f3f565b90610f57565b0590565b5050505f90565b916040916110789360018060a01b031681817f03889ec414d60aad079a991887429a3a7acef381d59eef9ee26ec5cec26279ee6020670de0b6b3a76400006110375f98858a52600284528a8a20878b528452610fbd8b8b20916002600184015493015490610f3f565b058851908152a3825260026020528282209082526020522060065f918281558260018201558260028201558260038201558260048201558260058201550155565b565b5f81126110845790565b61108d90610ef0565b9056fea264697066735822122051110258ba1c5291d6f8ad06bec45a985d1f7a076b40b9f08bdf3ea985f1bf9164736f6c63430008140033","sourceMap":"519:12142:34:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;519:12142:34;;;;;;:::i;:::-;;;-1:-1:-1;;;;;519:12142:34;;;;3419:10;:19;;;3415:46;;519:12142;4391:37;;;519:12142;4391:37;;-1:-1:-1;;;;;;519:12142:34;;;;;3415:46;519:12142;;-1:-1:-1;;;3447:14:34;;519:12142;;3447:14;519:12142;;;;;;;;;;-1:-1:-1;;519:12142:34;;;;;;:::i;:::-;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;519:12142:34;;;;;;:::i;:::-;;;;;;-1:-1:-1;;;;;519:12142:34;;;;;;;3544:10;519:12142;;;;;;;;;;;;;3525:30;3521:57;;519:12142;;;;;;;;;;;;3660:38;3656:67;;2241:1;3922:7;519:12142;3922:18;3918:46;;2241:1;3922:7;519:12142;;;;;;2241:1;519:12142;;;;;;;;;;;;;;9147:8;519:12142;;;9147:13;;9143:44;;9457:57;519:12142;;9457:57;519:12142;;;;;;;;;;;;9291:12;519:12142;9291:12;;9287:147;519:12142;;;;;9341:14;9319:36;519:12142;;9341:14;:::i;:::-;9319:18;;519:12142;;;9319:36;:::i;:::-;519:12142;;9287:147;519:12142;;;-1:-1:-1;;;;;519:12142:34;;;;;;;;;;;;;;;;;;;9457:57;;;;519:12142;;2241:1;519:12142;;;;;;;;;9559:34;519:12142;;;;-1:-1:-1;519:12142:34;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;9559:34;519:12142;3922:7;519:12142;;9287:147;9386:37;9409:14;;;2241:1;9409:14;;:::i;9386:37::-;519:12142;;9287:147;;9143:44;519:12142;;-1:-1:-1;;;9169:18:34;;519:12142;;9169:18;3918:46;519:12142;;-1:-1:-1;;;3949:15:34;;519:12142;;3949:15;3656:67;519:12142;;-1:-1:-1;;;3707:16:34;;519:12142;;3707:16;519:12142;;;;;;-1:-1:-1;;519:12142:34;;;;;;:::i;:::-;3544:10;519:12142;;;;;;;;;;;3525:30;3521:57;;519:12142;;;;;;;;3806:24;519:12142;;;3806:24;519:12142;;3805:25;3801:55;;2241:1;3922:7;519:12142;3922:18;3918:46;;2241:1;3922:7;519:12142;;;5920:14;5916:40;;519:12142;;5970:10;:26;;;;519:12142;5966:53;;519:12142;;;;;;;;;2241:1;519:12142;;;;;;;;;;;;;;;;;;;;6197:8;12080:19;519:12142;6197:8;;519:12142;;11866:11;;11862:161;519:12142;;;11915:13;;;:::i;:::-;11893:35;519:12142;11893:18;;519:12142;;;11893:35;:::i;:::-;519:12142;;11862:161;519:12142;;12080:19;;:::i;:::-;519:12142;12113:11;;519:12142;;;12160:34;:18;12181:13;519:12142;12160:18;;519:12142;12181:13;;:::i;:::-;12160:34;;:::i;:::-;519:12142;12224:12;;519:12142;12212:24;;12208:51;;519:12142;12160:18;;519:12142;12109:421;519:12142;6197:8;;519:12142;6267:13;;;519:12142;;;;;;;;6197:8;;519:12142;;;2241:1;6395:14;;519:12142;3806:24;3922:7;519:12142;;6431:14;;519:12142;6431:14;;519:12142;6497:15;519:12142;6477:17;;519:12142;;6549:19;;519:12142;6526:20;;;519:12142;6604:18;519:12142;6582:19;;519:12142;6654:67;519:12142;;;6654:67;519:12142;;;;;;;;;;;;;;6654:67;519:12142;;;;;;;;;;;;;;;;;;6654:67;;;;519:12142;3922:7;519:12142;;6263:1790;519:12142;6800:20;519:12142;;6800:20;;:::i;:::-;6851:12;;;;519:12142;;;;6957:5;519:12142;;;;;;6957:5;;:::i;:::-;6263:1790;;6847:1196;519:12142;7007:11;;;6989:12;;6988:31;6984:1059;519:12142;;;6197:8;7111:14;519:12142;6197:8;;519:12142;7111:14;:::i;:::-;7128;7243:27;7111:31;2241:1;7128:14;;519:12142;;;7111:31;;:::i;:::-;7184:23;519:12142;;7184:15;519:12142;;7184:15;:::i;:::-;:23;:::i;7243:27::-;7274:13;;;;:::i;:::-;519:12142;;;;;;;;;;6197:8;;519:12142;7341:14;:33;519:12142;;;;7341:33;:::i;:::-;519:12142;;;;;;;;;;;;;;7414:61;519:12142;;;;;;;;;;7414:61;;6263:1790;;519:12142;;;;;;;;;;;;6984:1059;7963:65;519:12142;7963:65;519:12142;7603:5;519:12142;;;;7603:5;;:::i;:::-;6197:8;519:12142;6197:8;;519:12142;;;2241:1;7680:14;;519:12142;3806:24;3922:7;519:12142;;7720:14;;519:12142;7720:14;;519:12142;7790:15;519:12142;7770:17;;519:12142;;7846:19;;519:12142;7823:20;;;519:12142;7905:18;519:12142;7883:19;;519:12142;;;;;;;;;;;;;;;;;;7963:65;;519:12142;;;;;;;;;;;;;;;;;;7963:65;;;;6263:1790;;12208:51;519:12142;;-1:-1:-1;;;12245:14:34;;519:12142;;12245:14;12109:421;519:12142;12324:11;;12320:210;;12109:421;;;;12320:210;12372:35;:19;12394:13;2241:1;12372:19;;519:12142;12394:13;;:::i;12372:35::-;519:12142;12438:12;;519:12142;12425:25;;12421:52;;2241:1;12372:19;;519:12142;12320:210;;;11862:161;519:12142;11949:11;;11945:78;11862:161;11945:78;11999:13;;;:::i;:::-;11976:36;2241:1;11976:19;;519:12142;;;11976:36;:::i;:::-;519:12142;;11862:161;;5966:53;519:12142;;-1:-1:-1;;;6005:14:34;;519:12142;;6005:14;5970:26;519:12142;5992:4;519:12142;;5984:12;5970:26;;5916:40;519:12142;;-1:-1:-1;;;5943:13:34;;519:12142;;5943:13;3801:55;519:12142;;-1:-1:-1;;;3839:17:34;;519:12142;;3839:17;519:12142;;;;;;-1:-1:-1;;519:12142:34;;;;;;:::i;:::-;;;;;;3544:10;;519:12142;;;;;;;;;;;3525:30;3521:57;;519:12142;;;;;;;;;;;-1:-1:-1;;;;;519:12142:34;;;;3660:38;3656:67;;2241:1;3922:7;519:12142;3922:18;3918:46;;2241:1;3922:7;519:12142;;;;;;2241:1;519:12142;;;;;;;;;;;;;8383:8;519:12142;8383:8;;519:12142;8383:13;8379:44;;519:12142;8446:19;;519:12142;;;;8481:14;519:12142;8481:14;:42;:14;8751:53;8481:14;;519:12142;;;8481:42;:::i;:::-;519:12142;;8442:286;8789:14;519:12142;;;;;;;;;;;8751:53;519:12142;3922:7;519:12142;;8442:286;8582:16;;;:::i;:::-;8629:14;519:12142;8629:14;;519:12142;;;8617:26;;;;8613:63;;8751:53;8690:27;;519:12142;8690:27;519:12142;8690:27;;:::i;:::-;519:12142;;8442:286;;8613:63;519:12142;;-1:-1:-1;;;8652:24:34;;519:12142;;8652:24;519:12142;;;;;;-1:-1:-1;;519:12142:34;;;;-1:-1:-1;;;;;519:12142:34;;:::i;:::-;;;;1806:65;519:12142;;;;;;;;;;;;;;;;;1806:65;519:12142;1806:65;;519:12142;1806:65;;;;519:12142;;1806:65;;519:12142;;1806:65;;519:12142;1806:65;;;;;519:12142;1806:65;;519:12142;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;519:12142:34;;;;;;2025:40;-1:-1:-1;;;;;519:12142:34;;;;;;;;;;;;-1:-1:-1;;519:12142:34;;;;-1:-1:-1;;;;;519:12142:34;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;519:12142:34;;;;;;;;;;;;;;;;;;;;;;;1716:41;519:12142;1716:41;;519:12142;1716:41;;;;519:12142;;1716:41;;519:12142;;1716:41;;519:12142;1716:41;519:12142;1716:41;;;;519:12142;1716:41;;519:12142;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;519:12142:34;;;;;;;;:::i;:::-;;;-1:-1:-1;;;;;519:12142:34;;;3419:10;:19;3415:46;;519:12142;;;;;;;;;;;3660:38;3656:67;;5262:33;519:12142;;;;;;5262:24;519:12142;;;5262:24;519:12142;;;;;;;;;;;;;;;5262:33;519:12142;;;;;;;-1:-1:-1;;519:12142:34;;;;;;;;-1:-1:-1;;;;;519:12142:34;;;;;;;;;;;;;;-1:-1:-1;;519:12142:34;;;;;;3544:10;519:12142;;;;;;;;;;;3525:30;3521:57;;519:12142;;;;;;;;;;;-1:-1:-1;;;;;519:12142:34;3660:38;3656:67;;519:12142;;;;;;;;;;;9923:19;;519:12142;9970:18;519:12142;;9970:18;;519:12142;;;;;;;;;;-1:-1:-1;;519:12142:34;;;;;;;;;;;;;;;;;;;-1:-1:-1;;519:12142:34;;;;;;:::i;:::-;;;:::i;:::-;;;;;;;;;;10187:9;519:12142;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;10187:9;519:12142;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;519:12142:34;;;;;;;;;;;;10498:56;519:12142;;;10534:19;519:12142;10505:18;;519:12142;10534:19;;519:12142;10498:56;;:::i;:::-;519:12142;;;;;;;;;;;;-1:-1:-1;;519:12142:34;;;;;;:::i;:::-;;;;;;-1:-1:-1;;;;;519:12142:34;;;3419:10;:19;3415:46;;519:12142;;;-1:-1:-1;;519:12142:34;;;;;;;;;5099:38;519:12142;;;;;;;;;:::i;:::-;;;;;;;4835:249;;;519:12142;;;;4835:249;;519:12142;;;4835:249;;;519:12142;;;4835:249;;;4981:4;;519:12142;;;;;4835:249;;519:12142;;;4835:249;;;519:12142;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;519:12142:34;;;;;;;;;;;;;5099:38;519:12142;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;519:12142:34;;;;;;:::i;:::-;;;:::i;:::-;;;;;-1:-1:-1;;;;;519:12142:34;;;3419:10;:19;3415:46;;4618:36;519:12142;;;;;;;;;;;4565:38;519:12142;;;;;;;;;;;;;;;;;;;4565:38;519:12142;;;;;;;4618:36;519:12142;;;;;;;-1:-1:-1;;519:12142:34;;;;;;;;:::i;:::-;;;;;;;;:::i;:::-;;;;-1:-1:-1;;;;;519:12142:34;;;;;;:::o;:::-;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;:::o;:::-;-1:-1:-1;;;519:12142:34;;;;;;;:::o;:::-;;;;;;;;;;:::o;:::-;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;-1:-1:-1;519:12142:34;;;;;;;;;;;;;:::o;:::-;;;;;;;;;-1:-1:-1;;;519:12142:34;;;;;;;;;;;;;;;:::o;10809:495::-;519:12142;;;;;;-1:-1:-1;519:12142:34;10989:9;519:12142;;;-1:-1:-1;519:12142:34;;-1:-1:-1;519:12142:34;;;;-1:-1:-1;519:12142:34;11030:8;519:12142;11030:8;;519:12142;11030:13;;11026:27;;11244:45;11232:58;11274:14;10989:9;11293:4;11274:14;;519:12142;11244:45;;:::i;:::-;11232:58;;:::i;:::-;519:12142;10809:495;:::o;11026:27::-;11045:8;;;-1:-1:-1;11045:8:34;:::o;11371:361::-;;519:12142;11371:361;11691:34;11371:361;519:12142;;;;;;-1:-1:-1;;11635:37:34;519:12142;11293:4;11549:55;-1:-1:-1;519:12142:34;;;;11490:9;519:12142;;;;;;;;;;11561:42;519:12142;;;11549:8;11490:9;519:12142;11549:8;;519:12142;11588:14;;519:12142;11561:42;;:::i;11549:55::-;519:12142;;;;;;11635:37;519:12142;;11490:9;519:12142;;;;;;;;;;;;-1:-1:-1;519:12142:34;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;11691:34;11371:361::o;12546:113::-;12624:1;12619:6;;12624:1;;12546:113;:::o;12619:33::-;12649:2;;;:::i;:::-;12546:113;:::o","linkReferences":{},"immutableReferences":{"50232":[{"start":2416,"length":32}]}},"methodIdentifiers":{"authorizedEngines(address)":"b1bf884a","collateralToken()":"b2016bd4","createMarket(address,uint256)":"34b62dd9","getMarket(uint256)":"eb44fdd3","getOIImbalance(uint256)":"3510954d","getPosition(address,uint256)":"3adbb5af","getUnrealizedPnL(address,uint256,uint256)":"2986a750","liquidatePosition(address,uint256,address,uint256)":"e38ce698","markets(uint256)":"b1283e77","modifyCollateral(address,uint256,int256)":"d49cb43a","nextMarketId()":"406ef2ef","openPosition(address,uint256,int256,uint256,uint256)":"d52019e3","owner()":"8da5cb5b","positions(address,uint256)":"c1be6677","setEngineAuthorization(address,bool)":"319dc996","setMarketActive(uint256,bool)":"aea61556","transferOwnership(address)":"f2fde38b","updateIndices(uint256,uint256,uint256)":"5c95fdf9"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.20+commit.a1b79de6\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_collateralToken\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"ExceedsMaxOI\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InsufficientCollateral\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidPrice\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidSize\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"MarketNotActive\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"MarketNotFound\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"PositionNotFound\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ReentrantCall\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"Unauthorized\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"engine\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"bool\",\"name\":\"authorized\",\"type\":\"bool\"}],\"name\":\"EngineAuthorized\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"marketId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"oracle\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"maxOI\",\"type\":\"uint256\"}],\"name\":\"MarketCreated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"trader\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"marketId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"realizedPnL\",\"type\":\"int256\"}],\"name\":\"PositionClosed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"trader\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"marketId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"liquidator\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"penalty\",\"type\":\"uint256\"}],\"name\":\"PositionLiquidated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"trader\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"marketId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"sizeDelta\",\"type\":\"int256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"newCollateral\",\"type\":\"uint256\"}],\"name\":\"PositionModified\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"trader\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"marketId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"size\",\"type\":\"int256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"entryPrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"collateral\",\"type\":\"uint256\"}],\"name\":\"PositionOpened\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"authorizedEngines\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"collateralToken\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"oracle\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"maxOI\",\"type\":\"uint256\"}],\"name\":\"createMarket\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"marketId\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"marketId\",\"type\":\"uint256\"}],\"name\":\"getMarket\",\"outputs\":[{\"components\":[{\"internalType\":\"address\",\"name\":\"oracle\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"totalLongOI\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalShortOI\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"maxOI\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"fundingIndex\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"borrowIndex\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"active\",\"type\":\"bool\"}],\"internalType\":\"struct PositionLedger.Market\",\"name\":\"\",\"type\":\"tuple\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"marketId\",\"type\":\"uint256\"}],\"name\":\"getOIImbalance\",\"outputs\":[{\"internalType\":\"int256\",\"name\":\"\",\"type\":\"int256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"trader\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"marketId\",\"type\":\"uint256\"}],\"name\":\"getPosition\",\"outputs\":[{\"components\":[{\"internalType\":\"uint256\",\"name\":\"marketId\",\"type\":\"uint256\"},{\"internalType\":\"int256\",\"name\":\"size\",\"type\":\"int256\"},{\"internalType\":\"uint256\",\"name\":\"entryPrice\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"collateral\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"openTimestamp\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"lastFundingIndex\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"lastBorrowIndex\",\"type\":\"uint256\"}],\"internalType\":\"struct PositionLedger.Position\",\"name\":\"\",\"type\":\"tuple\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"trader\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"marketId\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"currentPrice\",\"type\":\"uint256\"}],\"name\":\"getUnrealizedPnL\",\"outputs\":[{\"internalType\":\"int256\",\"name\":\"pnl\",\"type\":\"int256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"trader\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"marketId\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"liquidator\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"penalty\",\"type\":\"uint256\"}],\"name\":\"liquidatePosition\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"markets\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"oracle\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"totalLongOI\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalShortOI\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"maxOI\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"fundingIndex\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"borrowIndex\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"active\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"trader\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"marketId\",\"type\":\"uint256\"},{\"internalType\":\"int256\",\"name\":\"collateralDelta\",\"type\":\"int256\"}],\"name\":\"modifyCollateral\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"nextMarketId\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"trader\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"marketId\",\"type\":\"uint256\"},{\"internalType\":\"int256\",\"name\":\"sizeDelta\",\"type\":\"int256\"},{\"internalType\":\"uint256\",\"name\":\"price\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"collateralDelta\",\"type\":\"uint256\"}],\"name\":\"openPosition\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"positions\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"marketId\",\"type\":\"uint256\"},{\"internalType\":\"int256\",\"name\":\"size\",\"type\":\"int256\"},{\"internalType\":\"uint256\",\"name\":\"entryPrice\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"collateral\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"openTimestamp\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"lastFundingIndex\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"lastBorrowIndex\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"engine\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"authorized\",\"type\":\"bool\"}],\"name\":\"setEngineAuthorization\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"marketId\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"active\",\"type\":\"bool\"}],\"name\":\"setMarketActive\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"marketId\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"newFundingIndex\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"newBorrowIndex\",\"type\":\"uint256\"}],\"name\":\"updateIndices\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"author\":\"LEVER Protocol\",\"details\":\"Single source of truth for all position data. Other engines read but never own exposure.  Positions represent leveraged exposure to prediction market outcomes. - Long: Betting outcome resolves YES (probability increases = profit) - Short: Betting outcome resolves NO (probability decreases = profit)\",\"kind\":\"dev\",\"methods\":{\"getUnrealizedPnL(address,uint256,uint256)\":{\"params\":{\"currentPrice\":\"Current mark price\",\"marketId\":\"Market ID\",\"trader\":\"Position owner\"},\"returns\":{\"pnl\":\"Unrealized PnL (can be negative)\"}},\"openPosition(address,uint256,int256,uint256,uint256)\":{\"params\":{\"collateralDelta\":\"Collateral to add\",\"marketId\":\"The market to trade\",\"price\":\"Current mark price\",\"sizeDelta\":\"Change in position size (positive = add long/reduce short)\",\"trader\":\"The position owner\"}}},\"title\":\"PositionLedger\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"getUnrealizedPnL(address,uint256,uint256)\":{\"notice\":\"Calculate unrealized PnL for a position\"},\"liquidatePosition(address,uint256,address,uint256)\":{\"notice\":\"Liquidate an unsafe position\"},\"modifyCollateral(address,uint256,int256)\":{\"notice\":\"Add or remove collateral from position\"},\"openPosition(address,uint256,int256,uint256,uint256)\":{\"notice\":\"Open a new position or add to existing\"},\"updateIndices(uint256,uint256,uint256)\":{\"notice\":\"Update funding and borrow indices (called by Risk Engine)\"}},\"notice\":\"Core position tracking for synthetic perpetuals on prediction markets\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/PositionLedger.sol\":\"PositionLedger\"},\"evmVersion\":\"shanghai\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":forge-std/=lib/forge-std/src/\"],\"viaIR\":true},\"sources\":{\"src/PositionLedger.sol\":{\"keccak256\":\"0x8be19ea846be982887597f75ab12b6e0c9f22defd06008804f349b989bacd9ef\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://f6a2201220cf61ca178674fb04dac56171ac62424aa004f6dfdbdba35f077165\",\"dweb:/ipfs/QmYExUxyn8JQfQrk62T8ZR8qHQKmEuMqW3HsbfVwvytfMH\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.20+commit.a1b79de6"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"address","name":"_collateralToken","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"type":"error","name":"ExceedsMaxOI"},{"inputs":[],"type":"error","name":"InsufficientCollateral"},{"inputs":[],"type":"error","name":"InvalidPrice"},{"inputs":[],"type":"error","name":"InvalidSize"},{"inputs":[],"type":"error","name":"MarketNotActive"},{"inputs":[],"type":"error","name":"MarketNotFound"},{"inputs":[],"type":"error","name":"PositionNotFound"},{"inputs":[],"type":"error","name":"ReentrantCall"},{"inputs":[],"type":"error","name":"Unauthorized"},{"inputs":[{"internalType":"address","name":"engine","type":"address","indexed":true},{"internalType":"bool","name":"authorized","type":"bool","indexed":false}],"type":"event","name":"EngineAuthorized","anonymous":false},{"inputs":[{"internalType":"uint256","name":"marketId","type":"uint256","indexed":true},{"internalType":"address","name":"oracle","type":"address","indexed":false},{"internalType":"uint256","name":"maxOI","type":"uint256","indexed":false}],"type":"event","name":"MarketCreated","anonymous":false},{"inputs":[{"internalType":"address","name":"previousOwner","type":"address","indexed":true},{"internalType":"address","name":"newOwner","type":"address","indexed":true}],"type":"event","name":"OwnershipTransferred","anonymous":false},{"inputs":[{"internalType":"address","name":"trader","type":"address","indexed":true},{"internalType":"uint256","name":"marketId","type":"uint256","indexed":true},{"internalType":"int256","name":"realizedPnL","type":"int256","indexed":false}],"type":"event","name":"PositionClosed","anonymous":false},{"inputs":[{"internalType":"address","name":"trader","type":"address","indexed":true},{"internalType":"uint256","name":"marketId","type":"uint256","indexed":true},{"internalType":"address","name":"liquidator","type":"address","indexed":false},{"internalType":"uint256","name":"penalty","type":"uint256","indexed":false}],"type":"event","name":"PositionLiquidated","anonymous":false},{"inputs":[{"internalType":"address","name":"trader","type":"address","indexed":true},{"internalType":"uint256","name":"marketId","type":"uint256","indexed":true},{"internalType":"int256","name":"sizeDelta","type":"int256","indexed":false},{"internalType":"uint256","name":"newCollateral","type":"uint256","indexed":false}],"type":"event","name":"PositionModified","anonymous":false},{"inputs":[{"internalType":"address","name":"trader","type":"address","indexed":true},{"internalType":"uint256","name":"marketId","type":"uint256","indexed":true},{"internalType":"int256","name":"size","type":"int256","indexed":false},{"internalType":"uint256","name":"entryPrice","type":"uint256","indexed":false},{"internalType":"uint256","name":"collateral","type":"uint256","indexed":false}],"type":"event","name":"PositionOpened","anonymous":false},{"inputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","name":"authorizedEngines","outputs":[{"internalType":"bool","name":"","type":"bool"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"collateralToken","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[{"internalType":"address","name":"oracle","type":"address"},{"internalType":"uint256","name":"maxOI","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"createMarket","outputs":[{"internalType":"uint256","name":"marketId","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"marketId","type":"uint256"}],"stateMutability":"view","type":"function","name":"getMarket","outputs":[{"internalType":"struct PositionLedger.Market","name":"","type":"tuple","components":[{"internalType":"address","name":"oracle","type":"address"},{"internalType":"uint256","name":"totalLongOI","type":"uint256"},{"internalType":"uint256","name":"totalShortOI","type":"uint256"},{"internalType":"uint256","name":"maxOI","type":"uint256"},{"internalType":"uint256","name":"fundingIndex","type":"uint256"},{"internalType":"uint256","name":"borrowIndex","type":"uint256"},{"internalType":"bool","name":"active","type":"bool"}]}]},{"inputs":[{"internalType":"uint256","name":"marketId","type":"uint256"}],"stateMutability":"view","type":"function","name":"getOIImbalance","outputs":[{"internalType":"int256","name":"","type":"int256"}]},{"inputs":[{"internalType":"address","name":"trader","type":"address"},{"internalType":"uint256","name":"marketId","type":"uint256"}],"stateMutability":"view","type":"function","name":"getPosition","outputs":[{"internalType":"struct PositionLedger.Position","name":"","type":"tuple","components":[{"internalType":"uint256","name":"marketId","type":"uint256"},{"internalType":"int256","name":"size","type":"int256"},{"internalType":"uint256","name":"entryPrice","type":"uint256"},{"internalType":"uint256","name":"collateral","type":"uint256"},{"internalType":"uint256","name":"openTimestamp","type":"uint256"},{"internalType":"uint256","name":"lastFundingIndex","type":"uint256"},{"internalType":"uint256","name":"lastBorrowIndex","type":"uint256"}]}]},{"inputs":[{"internalType":"address","name":"trader","type":"address"},{"internalType":"uint256","name":"marketId","type":"uint256"},{"internalType":"uint256","name":"currentPrice","type":"uint256"}],"stateMutability":"view","type":"function","name":"getUnrealizedPnL","outputs":[{"internalType":"int256","name":"pnl","type":"int256"}]},{"inputs":[{"internalType":"address","name":"trader","type":"address"},{"internalType":"uint256","name":"marketId","type":"uint256"},{"internalType":"address","name":"liquidator","type":"address"},{"internalType":"uint256","name":"penalty","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"liquidatePosition"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","name":"markets","outputs":[{"internalType":"address","name":"oracle","type":"address"},{"internalType":"uint256","name":"totalLongOI","type":"uint256"},{"internalType":"uint256","name":"totalShortOI","type":"uint256"},{"internalType":"uint256","name":"maxOI","type":"uint256"},{"internalType":"uint256","name":"fundingIndex","type":"uint256"},{"internalType":"uint256","name":"borrowIndex","type":"uint256"},{"internalType":"bool","name":"active","type":"bool"}]},{"inputs":[{"internalType":"address","name":"trader","type":"address"},{"internalType":"uint256","name":"marketId","type":"uint256"},{"internalType":"int256","name":"collateralDelta","type":"int256"}],"stateMutability":"nonpayable","type":"function","name":"modifyCollateral"},{"inputs":[],"stateMutability":"view","type":"function","name":"nextMarketId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"address","name":"trader","type":"address"},{"internalType":"uint256","name":"marketId","type":"uint256"},{"internalType":"int256","name":"sizeDelta","type":"int256"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"uint256","name":"collateralDelta","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"openPosition"},{"inputs":[],"stateMutability":"view","type":"function","name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","name":"positions","outputs":[{"internalType":"uint256","name":"marketId","type":"uint256"},{"internalType":"int256","name":"size","type":"int256"},{"internalType":"uint256","name":"entryPrice","type":"uint256"},{"internalType":"uint256","name":"collateral","type":"uint256"},{"internalType":"uint256","name":"openTimestamp","type":"uint256"},{"internalType":"uint256","name":"lastFundingIndex","type":"uint256"},{"internalType":"uint256","name":"lastBorrowIndex","type":"uint256"}]},{"inputs":[{"internalType":"address","name":"engine","type":"address"},{"internalType":"bool","name":"authorized","type":"bool"}],"stateMutability":"nonpayable","type":"function","name":"setEngineAuthorization"},{"inputs":[{"internalType":"uint256","name":"marketId","type":"uint256"},{"internalType":"bool","name":"active","type":"bool"}],"stateMutability":"nonpayable","type":"function","name":"setMarketActive"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"transferOwnership"},{"inputs":[{"internalType":"uint256","name":"marketId","type":"uint256"},{"internalType":"uint256","name":"newFundingIndex","type":"uint256"},{"internalType":"uint256","name":"newBorrowIndex","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"updateIndices"}],"devdoc":{"kind":"dev","methods":{"getUnrealizedPnL(address,uint256,uint256)":{"params":{"currentPrice":"Current mark price","marketId":"Market ID","trader":"Position owner"},"returns":{"pnl":"Unrealized PnL (can be negative)"}},"openPosition(address,uint256,int256,uint256,uint256)":{"params":{"collateralDelta":"Collateral to add","marketId":"The market to trade","price":"Current mark price","sizeDelta":"Change in position size (positive = add long/reduce short)","trader":"The position owner"}}},"version":1},"userdoc":{"kind":"user","methods":{"getUnrealizedPnL(address,uint256,uint256)":{"notice":"Calculate unrealized PnL for a position"},"liquidatePosition(address,uint256,address,uint256)":{"notice":"Liquidate an unsafe position"},"modifyCollateral(address,uint256,int256)":{"notice":"Add or remove collateral from position"},"openPosition(address,uint256,int256,uint256,uint256)":{"notice":"Open a new position or add to existing"},"updateIndices(uint256,uint256,uint256)":{"notice":"Update funding and borrow indices (called by Risk Engine)"}},"version":1}},"settings":{"remappings":["forge-std/=lib/forge-std/src/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/PositionLedger.sol":"PositionLedger"},"evmVersion":"shanghai","libraries":{},"viaIR":true},"sources":{"src/PositionLedger.sol":{"keccak256":"0x8be19ea846be982887597f75ab12b6e0c9f22defd06008804f349b989bacd9ef","urls":["bzz-raw://f6a2201220cf61ca178674fb04dac56171ac62424aa004f6dfdbdba35f077165","dweb:/ipfs/QmYExUxyn8JQfQrk62T8ZR8qHQKmEuMqW3HsbfVwvytfMH"],"license":"MIT"}},"version":1},"id":34}
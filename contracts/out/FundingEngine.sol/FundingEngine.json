{"abi":[{"type":"constructor","inputs":[{"name":"_ledger","type":"address","internalType":"address"}],"stateMutability":"nonpayable"},{"type":"function","name":"PRECISION","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"authorizedKeepers","inputs":[{"name":"","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"batchUpdateFunding","inputs":[{"name":"marketIds","type":"uint256[]","internalType":"uint256[]"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"configureFunding","inputs":[{"name":"marketId","type":"uint256","internalType":"uint256"},{"name":"maxFundingRate","type":"uint256","internalType":"uint256"},{"name":"fundingPeriod","type":"uint256","internalType":"uint256"},{"name":"imbalanceThreshold","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"fundingConfigs","inputs":[{"name":"","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"maxFundingRate","type":"uint256","internalType":"uint256"},{"name":"fundingPeriod","type":"uint256","internalType":"uint256"},{"name":"imbalanceThreshold","type":"uint256","internalType":"uint256"},{"name":"lastFundingTime","type":"uint256","internalType":"uint256"},{"name":"cumulativeFunding","type":"int256","internalType":"int256"}],"stateMutability":"view"},{"type":"function","name":"getCurrentFundingRate","inputs":[{"name":"marketId","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"int256","internalType":"int256"}],"stateMutability":"view"},{"type":"function","name":"getFundingConfig","inputs":[{"name":"marketId","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"tuple","internalType":"struct FundingEngine.FundingConfig","components":[{"name":"maxFundingRate","type":"uint256","internalType":"uint256"},{"name":"fundingPeriod","type":"uint256","internalType":"uint256"},{"name":"imbalanceThreshold","type":"uint256","internalType":"uint256"},{"name":"lastFundingTime","type":"uint256","internalType":"uint256"},{"name":"cumulativeFunding","type":"int256","internalType":"int256"}]}],"stateMutability":"view"},{"type":"function","name":"getPendingFunding","inputs":[{"name":"trader","type":"address","internalType":"address"},{"name":"marketId","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"payment","type":"int256","internalType":"int256"}],"stateMutability":"view"},{"type":"function","name":"ledger","inputs":[],"outputs":[{"name":"","type":"address","internalType":"contract IPositionLedger"}],"stateMutability":"view"},{"type":"function","name":"owner","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"setKeeperAuthorization","inputs":[{"name":"keeper","type":"address","internalType":"address"},{"name":"authorized","type":"bool","internalType":"bool"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"transferOwnership","inputs":[{"name":"newOwner","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"updateFunding","inputs":[{"name":"marketId","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"event","name":"FundingConfigSet","inputs":[{"name":"marketId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"maxRate","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"period","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"threshold","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"FundingUpdated","inputs":[{"name":"marketId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"fundingRate","type":"int256","indexed":false,"internalType":"int256"},{"name":"cumulativeFunding","type":"int256","indexed":false,"internalType":"int256"}],"anonymous":false},{"type":"event","name":"KeeperAuthorized","inputs":[{"name":"keeper","type":"address","indexed":true,"internalType":"address"},{"name":"authorized","type":"bool","indexed":false,"internalType":"bool"}],"anonymous":false},{"type":"error","name":"FundingTooEarly","inputs":[]},{"type":"error","name":"MarketNotConfigured","inputs":[]},{"type":"error","name":"Unauthorized","inputs":[]}],"bytecode":{"object":"0x60a0346100a757601f610d2538819003918201601f19168301916001600160401b038311848410176100ab578084926020946040528339810103126100a757516001600160a01b038116908190036100a7573360018060a01b03195f5416175f55608052335f52600260205260405f20600160ff19825416179055604051610c6590816100c082396080518181816104d30152818161072c0152818161099e0152610a6c0152f35b5f80fd5b634e487b7160e01b5f52604160045260245ffdfe6080604081815260049081361015610015575f80fd5b5f92833560e01c9081633bcbd9171461075b5750806356397c3514610717578063579ca147146106ee5780636ea9f1391461045e5780638433036e146103935780638c1b753a146103695780638da5cb5b146103415780639d2b3d3c146102f0578063aaf5eb68146102cd578063ab4daa5e146101e1578063c56f264d1461019f578063eee81ff9146101095763f2fde38b146100b0575f80fd5b34610105576020366003190112610105576100c9610801565b8354926001600160a01b039283851633036100f957505016906bffffffffffffffffffffffff60a01b1617815580f35b516282b42960e81b8152fd5b8280fd5b509034610105578160031936011261010557610123610801565b906024359182151580930361019b5784546001600160a01b0392908316330361018e5750916020917fd370523e7a29cc54b0e1e6b66ffeb47a2c0d6e37b090e2da19993c7282da39ac9316938486526002835280862060ff1981541660ff841617905551908152a280f35b84516282b42960e81b8152fd5b8480fd5b8382346101dd5760203660031901126101dd5760209160ff9082906001600160a01b036101ca610801565b1681526002855220541690519015158152f35b5080fd5b50346101055760203660031901126101055781359167ffffffffffffffff9182841161019b573660238501121561019b578382013592831161019b57602493600591368686851b840101116102c957338752600260205260ff8188205416156102bb57865b858110610251578780f35b303b156102b7578151636ea9f13960e01b815281851b840188013586820152889081818a8183305af16102a3575b50505f19811461029157600101610246565b634e487b7160e01b8852601185528688fd5b6102ac9061084b565b6102b757875f61027f565b8780fd5b516282b42960e81b81528390fd5b8680fd5b8382346101dd57816003193601126101dd5760209051670de0b6b3a76400008152f35b5034610105576020366003190112610105578060a093833581526001602052208054926001820154926002830154916003840154930154938151958652602086015284015260608301526080820152f35b8382346101dd57816003193601126101dd57905490516001600160a01b039091168152602090f35b508234610390576020366003190112610390575061038960209235610968565b9051908152f35b80fd5b503461010557608036600319011261010557825482359260243592606435929091604435916001600160a01b031633036104515791606093917fcae42b83c0aefa140e2c63a9adb3230f75a0f739fe7154ac5f07cc2fc5d0254795938251906103fb8261081b565b858252888a6020840185815286850190888252878b87019342855260808801958187528152600160205220955186555160018601555160028501555160038401555191015581519384526020840152820152a280f35b82516282b42960e81b8152fd5b508290346101dd5760209081600319360112610105578335913384526002815260ff8285205416156106df578284526001815260018285200154156106cf57828452600181528184209060038201956104b887544261089d565b9081156106c157845163eb44fdd360e01b81528181018790527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169260e082602481875afa9182156106b757916105509184938b92610687575b5061053d878301926105338b8551920191825190610933565b935190519061094b565b885460028a01549160018b015494610bb3565b94019788548581019089878312911290801582169115161761067457895542905586841261065257670de0b6b3a764000084810180911161063f57915b803b156102b7576064889283899389519687958694635c95fdf960e01b86528501526024840152670de0b6b3a764000060448401525af1801561063557610602575b507f8c1a465fcfe98a1baaeede4757bbf1e8e40d9354fbe270b7d17ca3a60167735b93949554908351928352820152a280f35b9461062e7f8c1a465fcfe98a1baaeede4757bbf1e8e40d9354fbe270b7d17ca3a60167735b959661084b565b94936105cf565b84513d88823e3d90fd5b634e487b7160e01b885260118252602488fd5b61065b84610958565b670de0b6b3a764000090810390811161063f579161058d565b634e487b7160e01b895260118352602489fd5b6106a991925060e03d81116106b0575b6106a1818361087b565b8101906108be565b908c61051a565b503d610697565b87513d8b823e3d90fd5b845163a72a12a560e01b8152fd5b8151639d5abc1360e01b81528590fd5b81516282b42960e81b81528590fd5b8382346101dd57806003193601126101dd5760209061038961070e610801565b60243590610a38565b8382346101dd57816003193601126101dd57517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b9050346107fd5760203660031901126107fd578360a09460808361077f869561081b565b82815282602082015282858201528260608201520152833581526001602052208151916107ab8361081b565b8154938484526001830154602085019081526080600285015492848701938452600386015495606088019687520154950194855282519586525160208601525190840152516060830152516080820152f35b8380fd5b600435906001600160a01b038216820361081757565b5f80fd5b60a0810190811067ffffffffffffffff82111761083757604052565b634e487b7160e01b5f52604160045260245ffd5b67ffffffffffffffff811161083757604052565b60e0810190811067ffffffffffffffff82111761083757604052565b90601f8019910116810190811067ffffffffffffffff82111761083757604052565b919082039182116108aa57565b634e487b7160e01b5f52601160045260245ffd5b908160e091031261081757604051906108d68261085f565b8051906001600160a01b03821682036108175760c09183526020810151602084015260408101516040840152606081015160608401526080810151608084015260a081015160a0840152015180151581036108175760c082015290565b81810392915f1380158285131691841216176108aa57565b919082018092116108aa57565b600160ff1b81146108aa575f0390565b805f52600160205260405f20906001820154908115610a315760405163eb44fdd360e01b8152600481019190915260e0816024817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa8015610a2657610a039383925f92610a06575b506109f6602083019261053360408551920191825190610933565b6002825492015492610bb3565b90565b610a1f91925060e03d81116106b0576106a1818361087b565b905f6109db565b6040513d5f823e3d90fd5b5050505f90565b60408051633adbb5af60e01b81526001600160a01b0392831660048201526024810184905290929160e090829060449082907f0000000000000000000000000000000000000000000000000000000000000000165afa908115610b78575f91610aff575b506020810192835115610af7576080610ac4916004945f5260016020525f209201514261089d565b500154905180820291905f8212600160ff1b8214166108aa5781830514901517156108aa57670de0b6b3a7640000900590565b505050505f90565b9060e0823d8211610b70575b81610b1860e0938361087b565b81010312610390575060c0835191610b2f8361085f565b80518352602081015160208401528481015185840152606081015160608401526080810151608084015260a081015160a0840152015160c08201525f610a9c565b3d9150610b0b565b83513d5f823e3d90fd5b818102929181159184041417156108aa57565b8115610b9f570490565b634e487b7160e01b5f52601260045260245ffd5b9492919390158015610c27575b610c1e57610bec93610be7925f87121596875f14610c10575b818110610bfe575050610b82565b610b95565b9015610bf55790565b610a0390610958565b610be790610c0b93610b82565b610b82565b610c1990610958565b610bd9565b50505050505f90565b508115610bc056fea2646970667358221220c0760282d8fbe835acec2ada14f86b8f56f76057c0ca05e36eb5e42fce68553464736f6c63430008140033","sourceMap":"581:7821:30:-:0;;;;;;;;;;;;;-1:-1:-1;;581:7821:30;;;;-1:-1:-1;;;;;581:7821:30;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;581:7821:30;;;;;;;;2431:10;581:7821;;;;;;-1:-1:-1;581:7821:30;;;-1:-1:-1;581:7821:30;2451:33;;2431:10;-1:-1:-1;581:7821:30;2494:17;581:7821;;;-1:-1:-1;581:7821:30;;;;;;;;;;;;;;;;;;2451:33;581:7821;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;581:7821:30;;;;;;-1:-1:-1;581:7821:30;;;;;-1:-1:-1;581:7821:30","linkReferences":{}},"deployedBytecode":{"object":"0x6080604081815260049081361015610015575f80fd5b5f92833560e01c9081633bcbd9171461075b5750806356397c3514610717578063579ca147146106ee5780636ea9f1391461045e5780638433036e146103935780638c1b753a146103695780638da5cb5b146103415780639d2b3d3c146102f0578063aaf5eb68146102cd578063ab4daa5e146101e1578063c56f264d1461019f578063eee81ff9146101095763f2fde38b146100b0575f80fd5b34610105576020366003190112610105576100c9610801565b8354926001600160a01b039283851633036100f957505016906bffffffffffffffffffffffff60a01b1617815580f35b516282b42960e81b8152fd5b8280fd5b509034610105578160031936011261010557610123610801565b906024359182151580930361019b5784546001600160a01b0392908316330361018e5750916020917fd370523e7a29cc54b0e1e6b66ffeb47a2c0d6e37b090e2da19993c7282da39ac9316938486526002835280862060ff1981541660ff841617905551908152a280f35b84516282b42960e81b8152fd5b8480fd5b8382346101dd5760203660031901126101dd5760209160ff9082906001600160a01b036101ca610801565b1681526002855220541690519015158152f35b5080fd5b50346101055760203660031901126101055781359167ffffffffffffffff9182841161019b573660238501121561019b578382013592831161019b57602493600591368686851b840101116102c957338752600260205260ff8188205416156102bb57865b858110610251578780f35b303b156102b7578151636ea9f13960e01b815281851b840188013586820152889081818a8183305af16102a3575b50505f19811461029157600101610246565b634e487b7160e01b8852601185528688fd5b6102ac9061084b565b6102b757875f61027f565b8780fd5b516282b42960e81b81528390fd5b8680fd5b8382346101dd57816003193601126101dd5760209051670de0b6b3a76400008152f35b5034610105576020366003190112610105578060a093833581526001602052208054926001820154926002830154916003840154930154938151958652602086015284015260608301526080820152f35b8382346101dd57816003193601126101dd57905490516001600160a01b039091168152602090f35b508234610390576020366003190112610390575061038960209235610968565b9051908152f35b80fd5b503461010557608036600319011261010557825482359260243592606435929091604435916001600160a01b031633036104515791606093917fcae42b83c0aefa140e2c63a9adb3230f75a0f739fe7154ac5f07cc2fc5d0254795938251906103fb8261081b565b858252888a6020840185815286850190888252878b87019342855260808801958187528152600160205220955186555160018601555160028501555160038401555191015581519384526020840152820152a280f35b82516282b42960e81b8152fd5b508290346101dd5760209081600319360112610105578335913384526002815260ff8285205416156106df578284526001815260018285200154156106cf57828452600181528184209060038201956104b887544261089d565b9081156106c157845163eb44fdd360e01b81528181018790527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169260e082602481875afa9182156106b757916105509184938b92610687575b5061053d878301926105338b8551920191825190610933565b935190519061094b565b885460028a01549160018b015494610bb3565b94019788548581019089878312911290801582169115161761067457895542905586841261065257670de0b6b3a764000084810180911161063f57915b803b156102b7576064889283899389519687958694635c95fdf960e01b86528501526024840152670de0b6b3a764000060448401525af1801561063557610602575b507f8c1a465fcfe98a1baaeede4757bbf1e8e40d9354fbe270b7d17ca3a60167735b93949554908351928352820152a280f35b9461062e7f8c1a465fcfe98a1baaeede4757bbf1e8e40d9354fbe270b7d17ca3a60167735b959661084b565b94936105cf565b84513d88823e3d90fd5b634e487b7160e01b885260118252602488fd5b61065b84610958565b670de0b6b3a764000090810390811161063f579161058d565b634e487b7160e01b895260118352602489fd5b6106a991925060e03d81116106b0575b6106a1818361087b565b8101906108be565b908c61051a565b503d610697565b87513d8b823e3d90fd5b845163a72a12a560e01b8152fd5b8151639d5abc1360e01b81528590fd5b81516282b42960e81b81528590fd5b8382346101dd57806003193601126101dd5760209061038961070e610801565b60243590610a38565b8382346101dd57816003193601126101dd57517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b9050346107fd5760203660031901126107fd578360a09460808361077f869561081b565b82815282602082015282858201528260608201520152833581526001602052208151916107ab8361081b565b8154938484526001830154602085019081526080600285015492848701938452600386015495606088019687520154950194855282519586525160208601525190840152516060830152516080820152f35b8380fd5b600435906001600160a01b038216820361081757565b5f80fd5b60a0810190811067ffffffffffffffff82111761083757604052565b634e487b7160e01b5f52604160045260245ffd5b67ffffffffffffffff811161083757604052565b60e0810190811067ffffffffffffffff82111761083757604052565b90601f8019910116810190811067ffffffffffffffff82111761083757604052565b919082039182116108aa57565b634e487b7160e01b5f52601160045260245ffd5b908160e091031261081757604051906108d68261085f565b8051906001600160a01b03821682036108175760c09183526020810151602084015260408101516040840152606081015160608401526080810151608084015260a081015160a0840152015180151581036108175760c082015290565b81810392915f1380158285131691841216176108aa57565b919082018092116108aa57565b600160ff1b81146108aa575f0390565b805f52600160205260405f20906001820154908115610a315760405163eb44fdd360e01b8152600481019190915260e0816024817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa8015610a2657610a039383925f92610a06575b506109f6602083019261053360408551920191825190610933565b6002825492015492610bb3565b90565b610a1f91925060e03d81116106b0576106a1818361087b565b905f6109db565b6040513d5f823e3d90fd5b5050505f90565b60408051633adbb5af60e01b81526001600160a01b0392831660048201526024810184905290929160e090829060449082907f0000000000000000000000000000000000000000000000000000000000000000165afa908115610b78575f91610aff575b506020810192835115610af7576080610ac4916004945f5260016020525f209201514261089d565b500154905180820291905f8212600160ff1b8214166108aa5781830514901517156108aa57670de0b6b3a7640000900590565b505050505f90565b9060e0823d8211610b70575b81610b1860e0938361087b565b81010312610390575060c0835191610b2f8361085f565b80518352602081015160208401528481015185840152606081015160608401526080810151608084015260a081015160a0840152015160c08201525f610a9c565b3d9150610b0b565b83513d5f823e3d90fd5b818102929181159184041417156108aa57565b8115610b9f570490565b634e487b7160e01b5f52601260045260245ffd5b9492919390158015610c27575b610c1e57610bec93610be7925f87121596875f14610c10575b818110610bfe575050610b82565b610b95565b9015610bf55790565b610a0390610958565b610be790610c0b93610b82565b610b82565b610c1990610958565b610bd9565b50505050505f90565b508115610bc056fea2646970667358221220c0760282d8fbe835acec2ada14f86b8f56f76057c0ca05e36eb5e42fce68553464736f6c63430008140033","sourceMap":"581:7821:30:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;581:7821:30;;;;;;:::i;:::-;;;;-1:-1:-1;;;;;581:7821:30;;;;1988:10;:19;1984:46;;581:7821;;;;;;;;;;;;;1984:46;581:7821;-1:-1:-1;;;2016:14:30;;;581:7821;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;-1:-1:-1;;;;;581:7821:30;;;;1988:10;:19;1984:46;;581:7821;;;;2855:36;581:7821;;;;;;2802:17;581:7821;;;;;;;;;;;;;;;;;;;;2855:36;581:7821;;1984:46;581:7821;;-1:-1:-1;;;2016:14:30;;;581:7821;;;;;;;;;;;;-1:-1:-1;;581:7821:30;;;;;;;;;;-1:-1:-1;;;;;581:7821:30;;:::i;:::-;;;;1316:49;581:7821;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;581:7821:30;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2113:10;581:7821;;2095:17;581:7821;;;;;;;;2094:30;2090:57;;5243:13;5258:20;;;;;;581:7821;;;5280:3;5303:4;:32;;;;581:7821;;-1:-1:-1;;;5303:32:30;;581:7821;;;;;;;;5303:32;;;581:7821;;;;;;;;5303:4;:32;;;;5280:3;-1:-1:-1;;;;581:7821:30;;;;;;5243:13;;581:7821;-1:-1:-1;;;581:7821:30;;;;;;;;5303:32;;;;:::i;:::-;581:7821;;5303:32;;;;581:7821;;;;2090:57;581:7821;-1:-1:-1;;;2133:14:30;;581:7821;;2133:14;581:7821;;;;;;;;;;;;;;;;;;;;;1429:4;581:7821;;;;;;;;;;-1:-1:-1;;581:7821:30;;;;;;;;;;;;;;;;;1224:55;581:7821;1224:55;;581:7821;1224:55;;;;581:7821;1224:55;581:7821;1224:55;;581:7821;1224:55;;581:7821;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;581:7821:30;;;;;;;;;;;;;;;;-1:-1:-1;;581:7821:30;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;-1:-1:-1;;581:7821:30;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;581:7821:30;1988:10;:19;1984:46;;581:7821;;;;3379:77;581:7821;;;;;;;;:::i;:::-;;;;3121:243;;581:7821;3121:243;;581:7821;;;3121:243;;;581:7821;;;;3121:243;;;;3304:15;;581:7821;;;3121:243;;581:7821;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;3379:77;581:7821;;1984:46;581:7821;;-1:-1:-1;;;2016:14:30;;;581:7821;;;;;;;;;;;;;;;;;;;2113:10;;581:7821;;2095:17;581:7821;;;;;;;;2094:30;2090:57;;581:7821;;;;;;;;;;2233:38;581:7821;2233:43;2229:77;;581:7821;;;;;;;;;3835:22;581:7821;3835:22;;581:7821;3817:40;581:7821;;3817:15;:40;:::i;:::-;3871:12;;;3867:42;;581:7821;;-1:-1:-1;;;3990:26:30;;;;;581:7821;;;3990:6;-1:-1:-1;;;;;581:7821:30;;;;;;;3990:26;;;;;;;;4243:204;3990:26;;;;;;;581:7821;4052:18;4129:40;4052:18;;;581:7821;4045:56;581:7821;;;4081:19;;581:7821;;;4045:56;;:::i;:::-;581:7821;;;;4129:40;;:::i;:::-;581:7821;;2095:17;4357:25;;581:7821;4417:20;581:7821;4417:20;;581:7821;4243:204;;:::i;:::-;4503:24;;581:7821;;;;;;;;;;;;;;;;;;;;;;;;;;3817:15;581:7821;;4752:16;;;581:7821;;1429:4;581:7821;;;;;;;;4752:113;;4884:58;;;;;581:7821;;;;;;;;;;;;;;;;4884:58;;;;581:7821;;;;;1429:4;581:7821;;;;4884:58;;;;;;;;4752:113;581:7821;4997:63;581:7821;;;;;;;;;;;;;4997:63;581:7821;;4884:58;;;4997:63;4884:58;;;:::i;:::-;;;;;;581:7821;;;;;;;;;;-1:-1:-1;;;581:7821:30;;;;;;;;4752:113;4852:12;;;:::i;:::-;1429:4;581:7821;;;;;;;;4752:113;;;581:7821;-1:-1:-1;;;581:7821:30;;;;;;;;3990:26;;;;;581:7821;3990:26;;;;;;;;;;:::i;:::-;;;;;:::i;:::-;;;;;;;;;;;581:7821;;;;;;;;;3867:42;581:7821;;-1:-1:-1;;;3892:17:30;;;2229:77;581:7821;;-1:-1:-1;;;2285:21:30;;581:7821;;2285:21;2090:57;581:7821;;-1:-1:-1;;;2133:14:30;;581:7821;;2133:14;581:7821;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;:::i;:::-;;;;;;;;;;;;;;;1141:39;-1:-1:-1;;;;;581:7821:30;;;;;;;;;;;;;;-1:-1:-1;;581:7821:30;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;581:7821:30;;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;-1:-1:-1;;;;;581:7821:30;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;-1:-1:-1;581:7821:30;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;:::o;:::-;-1:-1:-1;;;581:7821:30;;;;;;;:::o;5508:702::-;581:7821;-1:-1:-1;581:7821:30;5629:14;581:7821;;;-1:-1:-1;581:7821:30;5667:20;5629:14;5667:20;;581:7821;5667:25;;;5663:39;;581:7821;;-1:-1:-1;;;5760:26:30;;;;;581:7821;;;;;;;;5760:6;-1:-1:-1;;;;;581:7821:30;5760:26;;;;;;5965:238;5760:26;;;-1:-1:-1;5760:26:30;;;5508:702;5822:18;5899:40;581:7821;5822:18;;581:7821;5815:56;581:7821;;;5851:19;;581:7821;;;5815:56;;:::i;5899:40::-;6079:25;581:7821;;6079:25;;581:7821;5965:238;;:::i;:::-;5508:702;:::o;5760:26::-;;;;;581:7821;5760:26;;;;;;;;;:::i;:::-;;;;;;581:7821;;;-1:-1:-1;581:7821:30;;;;;5663:39;5694:8;;;-1:-1:-1;5694:8:30;:::o;6447:628::-;581:7821;;;-1:-1:-1;;;6617:36:30;;-1:-1:-1;;;;;581:7821:30;;;6617:36;;;581:7821;;;;;;;;;6447:628;581:7821;;;;;;;;6617:6;581:7821;6617:36;;;;;;;-1:-1:-1;6617:36:30;;;6447:628;6667:8;581:7821;6667:8;;581:7821;;;6667:13;6663:27;;6926:17;6908:35;581:7821;6617:36;581:7821;-1:-1:-1;581:7821:30;;;;-1:-1:-1;581:7821:30;6926:17;;581:7821;6908:15;:35;:::i;:::-;-1:-1:-1;6975:24:30;581:7821;;;;;;;;-1:-1:-1;581:7821:30;;-1:-1:-1;;;581:7821:30;;;;;;;;;;;;;;;1429:4;581:7821;;6447:628;:::o;6663:27::-;6682:8;;;;-1:-1:-1;6682:8:30;:::o;6617:36::-;;581:7821;6617:36;;;;;;;;;581:7821;6617:36;;;:::i;:::-;;;581:7821;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;6617:36;;;;;;-1:-1:-1;6617:36:30;;;581:7821;;;-1:-1:-1;581:7821:30;;;;;;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;:::o;:::-;;;;;;;;;;;;7505:895;;;;;;7739:12;:30;;;;7505:895;7735:44;;8232:25;7858:14;8233;7858;7750:1;7858:14;;;:57;;;;;;;8031:25;;;;;8072:14;;8233;:::i;:::-;8232:25;:::i;:::-;8348:45;;;;7505:895;:::o;8348:45::-;8380:13;;;:::i;8027:144::-;8125:22;;8124:36;8125:22;;:::i;8124:36::-;8233:14;:::i;7858:57::-;7904:10;;;:::i;:::-;7858:57;;7735:44;7771:8;;;;;7750:1;7771:8;:::o;7739:30::-;7755:14;;;7739:30;","linkReferences":{},"immutableReferences":{"46953":[{"start":1235,"length":32},{"start":1836,"length":32},{"start":2462,"length":32},{"start":2668,"length":32}]}},"methodIdentifiers":{"PRECISION()":"aaf5eb68","authorizedKeepers(address)":"c56f264d","batchUpdateFunding(uint256[])":"ab4daa5e","configureFunding(uint256,uint256,uint256,uint256)":"8433036e","fundingConfigs(uint256)":"9d2b3d3c","getCurrentFundingRate(uint256)":"8c1b753a","getFundingConfig(uint256)":"3bcbd917","getPendingFunding(address,uint256)":"579ca147","ledger()":"56397c35","owner()":"8da5cb5b","setKeeperAuthorization(address,bool)":"eee81ff9","transferOwnership(address)":"f2fde38b","updateFunding(uint256)":"6ea9f139"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.20+commit.a1b79de6\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_ledger\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"FundingTooEarly\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"MarketNotConfigured\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"Unauthorized\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"marketId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"maxRate\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"period\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"threshold\",\"type\":\"uint256\"}],\"name\":\"FundingConfigSet\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"marketId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"fundingRate\",\"type\":\"int256\"},{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"cumulativeFunding\",\"type\":\"int256\"}],\"name\":\"FundingUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"keeper\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"bool\",\"name\":\"authorized\",\"type\":\"bool\"}],\"name\":\"KeeperAuthorized\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"PRECISION\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"authorizedKeepers\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256[]\",\"name\":\"marketIds\",\"type\":\"uint256[]\"}],\"name\":\"batchUpdateFunding\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"marketId\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"maxFundingRate\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"fundingPeriod\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"imbalanceThreshold\",\"type\":\"uint256\"}],\"name\":\"configureFunding\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"fundingConfigs\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"maxFundingRate\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"fundingPeriod\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"imbalanceThreshold\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"lastFundingTime\",\"type\":\"uint256\"},{\"internalType\":\"int256\",\"name\":\"cumulativeFunding\",\"type\":\"int256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"marketId\",\"type\":\"uint256\"}],\"name\":\"getCurrentFundingRate\",\"outputs\":[{\"internalType\":\"int256\",\"name\":\"\",\"type\":\"int256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"marketId\",\"type\":\"uint256\"}],\"name\":\"getFundingConfig\",\"outputs\":[{\"components\":[{\"internalType\":\"uint256\",\"name\":\"maxFundingRate\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"fundingPeriod\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"imbalanceThreshold\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"lastFundingTime\",\"type\":\"uint256\"},{\"internalType\":\"int256\",\"name\":\"cumulativeFunding\",\"type\":\"int256\"}],\"internalType\":\"struct FundingEngine.FundingConfig\",\"name\":\"\",\"type\":\"tuple\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"trader\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"marketId\",\"type\":\"uint256\"}],\"name\":\"getPendingFunding\",\"outputs\":[{\"internalType\":\"int256\",\"name\":\"payment\",\"type\":\"int256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"ledger\",\"outputs\":[{\"internalType\":\"contract IPositionLedger\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"keeper\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"authorized\",\"type\":\"bool\"}],\"name\":\"setKeeperAuthorization\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"marketId\",\"type\":\"uint256\"}],\"name\":\"updateFunding\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{\"getPendingFunding(address,uint256)\":{\"params\":{\"marketId\":\"Market ID\",\"trader\":\"Position owner\"},\"returns\":{\"payment\":\"Funding payment (positive = owes, negative = receives)\"}},\"updateFunding(uint256)\":{\"params\":{\"marketId\":\"Market to update\"}}},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"batchUpdateFunding(uint256[])\":{\"notice\":\"Batch update funding for multiple markets\"},\"getCurrentFundingRate(uint256)\":{\"notice\":\"Get current funding rate for a market (annualized)\"},\"getFundingConfig(uint256)\":{\"notice\":\"Get funding config for a market\"},\"getPendingFunding(address,uint256)\":{\"notice\":\"Calculate pending funding payment for a position\"},\"updateFunding(uint256)\":{\"notice\":\"Update funding for a market\"}},\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/FundingEngine.sol\":\"FundingEngine\"},\"evmVersion\":\"shanghai\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":forge-std/=lib/forge-std/src/\"],\"viaIR\":true},\"sources\":{\"src/FundingEngine.sol\":{\"keccak256\":\"0x9d158426f117842dc31f49bdb6b6cfbc0785b1580e5f1677589681bf4e170105\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://e3f3f25df2eef835e34341c8e4c0ea50dc43a2e922ed40669119fe7cdcf81b3f\",\"dweb:/ipfs/QmZgPdCrTjKhL4Ssd5BuTVfiiEerLCqabAM77cfoubp4UT\"]},\"src/interfaces/IPositionLedger.sol\":{\"keccak256\":\"0x24384fd14f706615430e617695cb757b52471129c1c1635aae8be976da37e12e\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://8c3478b876621f0d9ac40b7aa3883ef00272b674c0b18b38628c17250ba77706\",\"dweb:/ipfs/QmTu11WwEFAAMntD2KvygSmdk7o56BypsrqxiCsAUFf9gz\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.20+commit.a1b79de6"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"address","name":"_ledger","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"type":"error","name":"FundingTooEarly"},{"inputs":[],"type":"error","name":"MarketNotConfigured"},{"inputs":[],"type":"error","name":"Unauthorized"},{"inputs":[{"internalType":"uint256","name":"marketId","type":"uint256","indexed":true},{"internalType":"uint256","name":"maxRate","type":"uint256","indexed":false},{"internalType":"uint256","name":"period","type":"uint256","indexed":false},{"internalType":"uint256","name":"threshold","type":"uint256","indexed":false}],"type":"event","name":"FundingConfigSet","anonymous":false},{"inputs":[{"internalType":"uint256","name":"marketId","type":"uint256","indexed":true},{"internalType":"int256","name":"fundingRate","type":"int256","indexed":false},{"internalType":"int256","name":"cumulativeFunding","type":"int256","indexed":false}],"type":"event","name":"FundingUpdated","anonymous":false},{"inputs":[{"internalType":"address","name":"keeper","type":"address","indexed":true},{"internalType":"bool","name":"authorized","type":"bool","indexed":false}],"type":"event","name":"KeeperAuthorized","anonymous":false},{"inputs":[],"stateMutability":"view","type":"function","name":"PRECISION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","name":"authorizedKeepers","outputs":[{"internalType":"bool","name":"","type":"bool"}]},{"inputs":[{"internalType":"uint256[]","name":"marketIds","type":"uint256[]"}],"stateMutability":"nonpayable","type":"function","name":"batchUpdateFunding"},{"inputs":[{"internalType":"uint256","name":"marketId","type":"uint256"},{"internalType":"uint256","name":"maxFundingRate","type":"uint256"},{"internalType":"uint256","name":"fundingPeriod","type":"uint256"},{"internalType":"uint256","name":"imbalanceThreshold","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"configureFunding"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","name":"fundingConfigs","outputs":[{"internalType":"uint256","name":"maxFundingRate","type":"uint256"},{"internalType":"uint256","name":"fundingPeriod","type":"uint256"},{"internalType":"uint256","name":"imbalanceThreshold","type":"uint256"},{"internalType":"uint256","name":"lastFundingTime","type":"uint256"},{"internalType":"int256","name":"cumulativeFunding","type":"int256"}]},{"inputs":[{"internalType":"uint256","name":"marketId","type":"uint256"}],"stateMutability":"view","type":"function","name":"getCurrentFundingRate","outputs":[{"internalType":"int256","name":"","type":"int256"}]},{"inputs":[{"internalType":"uint256","name":"marketId","type":"uint256"}],"stateMutability":"view","type":"function","name":"getFundingConfig","outputs":[{"internalType":"struct FundingEngine.FundingConfig","name":"","type":"tuple","components":[{"internalType":"uint256","name":"maxFundingRate","type":"uint256"},{"internalType":"uint256","name":"fundingPeriod","type":"uint256"},{"internalType":"uint256","name":"imbalanceThreshold","type":"uint256"},{"internalType":"uint256","name":"lastFundingTime","type":"uint256"},{"internalType":"int256","name":"cumulativeFunding","type":"int256"}]}]},{"inputs":[{"internalType":"address","name":"trader","type":"address"},{"internalType":"uint256","name":"marketId","type":"uint256"}],"stateMutability":"view","type":"function","name":"getPendingFunding","outputs":[{"internalType":"int256","name":"payment","type":"int256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"ledger","outputs":[{"internalType":"contract IPositionLedger","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[{"internalType":"address","name":"keeper","type":"address"},{"internalType":"bool","name":"authorized","type":"bool"}],"stateMutability":"nonpayable","type":"function","name":"setKeeperAuthorization"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"transferOwnership"},{"inputs":[{"internalType":"uint256","name":"marketId","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"updateFunding"}],"devdoc":{"kind":"dev","methods":{"getPendingFunding(address,uint256)":{"params":{"marketId":"Market ID","trader":"Position owner"},"returns":{"payment":"Funding payment (positive = owes, negative = receives)"}},"updateFunding(uint256)":{"params":{"marketId":"Market to update"}}},"version":1},"userdoc":{"kind":"user","methods":{"batchUpdateFunding(uint256[])":{"notice":"Batch update funding for multiple markets"},"getCurrentFundingRate(uint256)":{"notice":"Get current funding rate for a market (annualized)"},"getFundingConfig(uint256)":{"notice":"Get funding config for a market"},"getPendingFunding(address,uint256)":{"notice":"Calculate pending funding payment for a position"},"updateFunding(uint256)":{"notice":"Update funding for a market"}},"version":1}},"settings":{"remappings":["forge-std/=lib/forge-std/src/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/FundingEngine.sol":"FundingEngine"},"evmVersion":"shanghai","libraries":{},"viaIR":true},"sources":{"src/FundingEngine.sol":{"keccak256":"0x9d158426f117842dc31f49bdb6b6cfbc0785b1580e5f1677589681bf4e170105","urls":["bzz-raw://e3f3f25df2eef835e34341c8e4c0ea50dc43a2e922ed40669119fe7cdcf81b3f","dweb:/ipfs/QmZgPdCrTjKhL4Ssd5BuTVfiiEerLCqabAM77cfoubp4UT"],"license":"MIT"},"src/interfaces/IPositionLedger.sol":{"keccak256":"0x24384fd14f706615430e617695cb757b52471129c1c1635aae8be976da37e12e","urls":["bzz-raw://8c3478b876621f0d9ac40b7aa3883ef00272b674c0b18b38628c17250ba77706","dweb:/ipfs/QmTu11WwEFAAMntD2KvygSmdk7o56BypsrqxiCsAUFf9gz"],"license":"MIT"}},"version":1},"id":30}